# 需求2：用户管理-会员足迹页面增加删除功能实施方案

## 需求描述
会员足迹页面增加删除功能：单个删除功能、多个删除功能。

## 技术方案

### 前端实现

1. **添加删除按钮**
   - 在足迹列表每行添加"删除"按钮
   - 在列表顶部添加"批量删除"按钮和全选复选框

2. **实现单个删除**
   ```javascript
   // 单个删除方法
   handleDelete(row) {
     this.$confirm('确定删除该足迹记录？', '提示', {
       confirmButtonText: '确定',
       cancelButtonText: '取消',
       type: 'warning'
     }).then(() => {
       deleteFootprint(row.id).then(response => {
         this.$message.success('删除成功')
         this.getList() // 重新加载列表
       })
     })
   }
   ```

3. **实现批量删除**
   ```javascript
   // 批量删除方法
   handleBatchDelete() {
     if (this.selectedRows.length === 0) {
       this.$message.warning('请选择要删除的记录')
       return
     }
     
     this.$confirm(`确定删除选中的${this.selectedRows.length}条足迹记录？`, '提示', {
       confirmButtonText: '确定',
       cancelButtonText: '取消', 
       type: 'warning'
     }).then(() => {
       const ids = this.selectedRows.map(row => row.id)
       batchDeleteFootprint(ids).then(response => {
         this.$message.success('批量删除成功')
         this.getList()
       })
     })
   }
   ```

### 后端实现

1. **添加删除API接口**
   ```java
   // FootprintController.java
   @DeleteMapping("/delete")
   public Object delete(@RequestBody LitemallFootprint footprint) {
       Integer userId = footprint.getUserId();
       if (userId == null) {
           return ResponseUtil.badArgument();
       }
       
       LitemallFootprintExample example = new LitemallFootprintExample();
       example.or().andUserIdEqualTo(userId).andIdEqualTo(footprint.getId());
       
       footprintService.deleteByExample(example);
       return ResponseUtil.ok();
   }
   
   @PostMapping("/batch-delete")
   public Object batchDelete(@RequestBody Map<String, List<Integer>> request) {
       List<Integer> ids = request.get("ids");
       if (ids == null || ids.isEmpty()) {
           return ResponseUtil.badArgument();
       }
       
       LitemallFootprintExample example = new LitemallFootprintExample();
       example.or().andIdIn(ids);
       
       footprintService.deleteByExample(example);
       return ResponseUtil.ok();
   }
   ```

2. **Service层方法**
   ```java
   // FootprintService.java
   public void deleteByExample(LitemallFootprintExample example) {
       footprintMapper.deleteByExample(example);
   }
   ```

## 数据库设计
- 使用逻辑删除或物理删除
- 如逻辑删除，需添加deleted字段和删除时间

## 实施步骤
1. 后端开发删除API接口
2. 前端添加删除按钮和批量操作功能
3. 实现删除确认对话框
4. 添加操作权限控制
5. 测试单删和批量删除功能

## 预计工作量
- 后端开发：3-4小时
- 前端开发：4-6小时  
- 测试时间：2小时

## 注意事项
- 添加删除确认，防止误操作
- 批量删除要有数量限制，防止一次性删除过多数据
- 考虑数据备份和恢复机制
- 添加操作日志记录